var mongoose = require('mongoose');
var config = require("config");

var CompanyModel = require('../app/models/Company');
var RepresentativeModel = require('../app/models/Representative');
var CategoryModel = require('../app/models/Category');
var ProductModel = require('../app/models/Product');

var dropData = function (done) {
    CompanyModel.remove({}, function(){
        RepresentativeModel.remove({}, function () {
            CategoryModel.remove({}, done);
        });
    });
};

var createData = function(done){


    var company = new CompanyModel({
        login: "admin@sony.com",
        password: "1234",
        name: "Sony"
    });
    company.save(function(err){
        var represent1 = new RepresentativeModel({
            login: "martin@sony.com",
            password: "1234",
            name: "Martin",
            company: company._id
        });

        var represent2 = new RepresentativeModel({
            login: "robert@sony.com",
            password: "1234",
            name: "Robert",
            company: company._id
        });
        var represent3 = new RepresentativeModel({
            login: "anna@sony.com",
            password: "1234",
            name: "Anna",
            company: company._id
        });

        var represent4 = new RepresentativeModel({
            login: "Adele@sony.com",
            password: "1234",
            name: "Adele",
            company: company._id
        });

        var batchInsert = [represent1, represent2, represent3, represent4];
        RepresentativeModel.collection.insert(batchInsert, done);
    });
};

var createCategories = function(done){

   var cat = [
        "Televisions",
            "LED",
            "OLED",
            "Flat",
            "Curved",
            "TV Accessories",
                "Cables",
                "Cast Devices",

        "Home Entertainment Systems",	"Bestsellers",
            "Home Theater",
            "Televisions",
            "Speakers",
                "Bluetooth Speakers",
                "Bookshelf Speakers",
                "Ceiling and In Wall Speakers",
                "Centre Speakers",
                "Outdoor Speakers",
                "Satellite Speakers",
                "Soundbar Speakers",
                "Speaker Systems",
                "Subwoofers",
                "Tower Speakers",
            "Sound Bars",
            "DVD Players and Recorders",
            "Streaming Media Players",
            "Set Top Boxes",

        "Projectors",
            "Projector Accessories",
                "Cables",
                "Projector Screens",
                "Projector Bags & Cases",
                "Projector Lamps",
                "Projector Lenses",
                "Projector Mounts",
                "Projector Stands",

        "Modems and Routers",
            "Modems",
            "Routers",
            "Data Cards and Dongles",
            "Wireless USB Adaptors",
            "Switch",
            "Repeaters",

        "Headphones",
            "In Ear",
            "On Ear",
            "Over Ear",
            "Noice Cancelling",
            "Sports and Fitness",
            "Tangle Free Cord",
            "With Microphone",
            "Withouth Microphone",

        "MP3, Media Players & Accessories",
            "Media Player Accessories",
            "Boomboxes",
            "DVD And Blu Ray Players",
            "MP3 & MP4 Players",

        "Audio & Video Accessories",
            "3D Glasses",
            "Cables",
            "Headphones",
            "Headphone Accessories",
            "Projector Accessories",
            "Remote Controls",
            "TV Mounts & Stands",
            "Turntable Cartridges & Needles",
            "Video Converters",

        "Cameras",
            "Camera Accessories",
                "Batteries & Charges",
                "Caliberation Charts & Grey Cards",
                "Camcorder & Video Accessories",
                "Case & Bag Accessories",
                "Cases & Bags",
                "Cleaners",
                "Digital Camera Accessories",
                "Filters",
                "Flash Accessories",
                "Lens Accessories",
                "Photo Studio & Lightning",
                "Telescope Accessories",
                "Tripod & Monopod Accessories",
            "Action Cameras",
            "Binoculars",
            "Camcorders",
            "Digital Cameras",
            "Digital Picture Frames",
            "Film Cameras",
            "Flashes",
            "Survelliance Cameras",
            "Tripods & Monopods",
            "Underwater Video & Photography",
            "Video Projectors",

        "DSLR Cameras",

        "Camera Accessories",

        "Musical Instruments & Professional Audio",
            "Bass Guitars & Gear",
            "DJ & VJ Equipment",
            "Drums & Percussion",
            "Guitars & Gear",
            "Karaoke Equipment",
            "Microphone",
            "PA & Stage",
            "Piano & Keyboard",
            "Recording & Computer",
            "String Instruments",
            "Synthesizer & Sampler",
            "Wind Instruments",

        "Gaming Consoles",

        "Heating & Cooling Appliances",
            "Air Coolers",
            "Air Purifiers",
            "Dehumidifiers",
            "Fans",
            "Humidifiers",
            "Room Heaters",
            "Water Heaters",

        "Air Conditioners",
            "Window AC",
            "Split AC",

        "Refrigerators",
            "Multi Door",
            "Side By Side",
            "Standard Double Door",
            "Standard Single Door",

        "Washing Machines",
            "Top Loading",
            "Front Loading",
            "Fully Automatic",
            "Semi Automatic",

        "Kitchen & Home Appliances",
            "Mixer Grinders",
            "Juicers",
            "Food Processors",
            "Rice & Pasta Cookers",
            "Induction Cookers",
            "Espresso Machines",
            "Over Toaster Grills",
            "Kettles",
            "Toasters",
            "Sandwich Makers",
            "Stand Mixers",
    ];


   function increment (j){
        j+=1;
        return j;
    }

    function addCategories(x){
        const cat_entity = new CategoryModel({
            name: cat[x]
        });
        cat_entity.save(function(err, result){
            if (x === cat.length-1){
                done();
            }else{
                addCategories(increment(x));
            }

        });
    }
    addCategories(0);
};
mongoose.connect(config.database.connectionURL, { useMongoClient: true });
mongoose.Promise = global.Promise;

console.log("Setup Databse");
console.log("---");

console.log("Drop Data");
dropData(function () {
    console.log("Add Data");
    createData(function(){
        createCategories(function () {

                console.log("---");
                console.log("Finished");
                process.exit(0);
        });
    });
});